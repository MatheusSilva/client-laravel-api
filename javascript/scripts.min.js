"use strict";class Util
{static createCookie(nome,valor,dias)
{var expires;if(dias){var date=new Date();date.setTime(date.getTime()+(dias*24*60*60*1000));expires="; expires="+date.toGMTString()}else{expires=""}
document.cookie=nome+"="+valor+expires+"; path=/"}
static getCookie(c_name)
{if(document.cookie.length>0){var c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;var c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length}
return unescape(document.cookie.substring(c_start,c_end))}}
return ""}
static queryString()
{location.queryString={};location.search.substr(1).split("&").forEach(function(pair){if(pair==="")return;var parts=pair.split("=");location.queryString[parts[0]]=parts[1]&&decodeURIComponent(parts[1].replace(/\+/g," "))})}
static createXHR()
{var xhr=!1;try{xhr=new XMLHttpRequest()}catch(trymicrosoft){try{xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(othermicrosoft){try{xhr=new ActiveXObject("Microsoft.XMLHTTP")}catch(failed){xhr=!1}}}
if(!xhr){alert("Error initializing XMLHttpRequest!")}else{return xhr}}
static logado()
{var mensagem="";var xhr=Util.createXHR();if(xhr!=undefined){xhr.open("GET","http://localhost/laravel-api/public/api/v1/logado",!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'&&xhr.status!='200'){window.location="http://localhost/client-laravel-api/adm/formularios/form.login.htm"}}
var jwtoken='';jwtoken=Util.getCookie('token');if(jwtoken!=''){xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}else{window.location="http://localhost/client-laravel-api/adm/formularios/form.login.htm"}}else{window.location="http://localhost/client-laravel-api/adm/formularios/form.login.htm"}}
static logout()
{var mensagem="";var xhr=Util.createXHR();if(xhr!=undefined){xhr.open("GET","http://localhost/laravel-api/public/api/v1/logout",!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'){Util.createCookie('token','',-1);window.location="http://localhost/client-laravel-api/site/paginas/home.htm"}}
var jwtoken='';jwtoken=Util.getCookie('token');if(jwtoken!=''){xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}
window.location="http://localhost/client-laravel-api/site/paginas/home.htm"}else{Util.createCookie('token','',-1);window.location="http://localhost/client-laravel-api/site/paginas/home.htm"}}};class Login
{static valida(form)
{var strErro="";if(form.email==undefined||form.email===""){strErro=strErro+"\nVoce Nao Preencheu o Login"}
if(form.password==undefined||form.password===""){strErro=strErro+"\nVoce Nao Preencheu a Senha"}
if(strErro!==""){document.getElementById("mensagem").innerHTML="<br /><b>"+strErro+"</b>";return!1}}
static formToJSON(form)
{var email='';var password='';if(form.email!=undefined){email=form.email.value}
if(form.password!=undefined){password=form.password.value}
return JSON.stringify({"email":email,"password":password})}
static entrar(form)
{if(Login.valida(form)==!1){return!1}
document.getElementById("mensagem").innerHTML="<br /><b>Aguarde...</b>";var mensagem="";var xhr=Util.createXHR();if(mensagem==""&&xhr!=undefined){xhr.open("POST","http://localhost/laravel-api/public/api/v1/auth",!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);if(xhr.status=='200'){Util.createCookie('token',json.token,'1');window.location="http://localhost/client-laravel-api/adm/paginas/home.htm"}else if(xhr.status=='422'){var strErrosValidate="";if(json.json.validate_error.email!==undefined){strErrosValidate+=json.validate_error.email[0]}
if(json.json.validate_error.password!==undefined){strErrosValidate+=json.validate_error.password[0]}
if(strErrosValidate!==''){document.getElementById("mensagem").innerHTML="<br /><b>"+strErrosValidate+"</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else if(xhr.status=='500'){if(json.error!==undefined&&json.error==='token_invalid'){document.getElementById("mensagem").innerHTML="<br /><b>Token inválido. Faça o login novamente.</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else if(xhr.status=='401'){if(json.error!==undefined&&json.error==='invalid_credentials'){document.getElementById("mensagem").innerHTML="<br /><b>Senha ou usuário inválidos.</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send(Login.formToJSON(form))}else{document.getElementById("mensagem").innerHTML=mensagem}}};class Categoria
{static formToJSON(form)
{var codigo="",nome="";if(form.codigo!=undefined){codigo=form.codigo.value}
if(form.txtNome!=undefined){nome=form.txtNome.value}
return JSON.stringify({"codigo_categoria":codigo,"nome":nome})}
static listar()
{var jwtoken,codigo,detalhes,alterar,excluir;jwtoken=Util.getCookie('token');var table=jQuery('#tabela01').dataTable({processing:!0,serverSide:!0,dom:"Bfrtip",ajax:{"url":'http://localhost/laravel-api/public/api/v1/categorias',"dataType":'json',"type":"GET","beforeSend":function(xhr){xhr.setRequestHeader('Authorization','Bearer '+jwtoken)}},columns:[{"class":"details-control","orderable":!1,"searchable":!1,"searchable":!1,"data":null,render:function(data,type,row){codigo=data.codigo_categoria;detalhes="<a href=\"../consultas/detalhe.categoria.htm?codigo="+codigo+"\"><span class='glyphicon glyphicon-info-sign' aria-hidden='true'></span></a>";alterar="<span>  </span><a href=\"../formularios/alterar.categoria.htm?codigo="+codigo+"\"><span class='glyphicon glyphicon-edit' aria-hidden='true'></span></a>";excluir="<span>  </span><a href=\"javascript:Categoria.confirmar("+codigo+")\"><span class='glyphicon glyphicon-trash' aria-hidden='true'></span></a>";return detalhes+alterar+excluir},"defaultContent":"",},{"data":"codigo_categoria",name:"codigo_categoria","width":"60px"},{"data":"nome"},],select:!0,'language':{'url':'../../javascript/Portuguese-Brasil.json'}})}
static detalhe(codigo)
{var xhr=Util.createXHR();xhr.open("GET","http://localhost/laravel-api/public/api/v1/categorias/"+codigo,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'&&xhr.status=='200'){var data=JSON.parse(xhr.responseText);document.getElementById("codigo").value=data.codigo_categoria;document.getElementById("txtNome").value=data.nome}}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}
static callbackCadAltDel(xhr,op)
{var msg="";if(op==='cad'){msg="Categoria cadastrada com sucesso."}else if(op==='alt'){msg="Categoria alterada com sucesso."}
if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);if(xhr.status=='200'||xhr.status=='201'){if(op=='cad'){document.getElementById("txtNome").value=""}
if(op!=='exc'){document.getElementById("mensagem").innerHTML=msg}}else if(xhr.status=='422'){var strErrosValidate="";if(json.validate_error!==undefined&&json.json.validate_error.nome!==undefined){strErrosValidate+=json.validate_error.nome[0]}
if(strErrosValidate!==''){document.getElementById("mensagem").innerHTML="<br /><b>"+strErrosValidate+"</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else if(xhr.status=='500'){if(json.error!==undefined&&json.error==='token_invalid'){document.getElementById("mensagem").innerHTML="<br /><b>Token inválido. Faça o login novamente.</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else if(xhr.status=='401'){if(json.error!==undefined&&json.error==='token_expired'){document.getElementById("mensagem").innerHTML="<br /><b>Token expirado. Faça o login novamente.</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}}
static confirmar(codigo)
{var xhr=Util.createXHR();var ok=window.confirm("Você tem certeza que deseja excluir esta categoria?");if(ok){document.getElementById("ajax-loader").style.display='block';var mensagem="";if(Util.getCookie('token')==""){mensagem+="Token invalido"}
if(codigo==""){mensagem+="Código invalido"}
if(mensagem==""&&xhr!=undefined){xhr.open("DELETE","http://localhost/laravel-api/public/api/v1/categorias/"+codigo,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){Tecnico.callbackCadAltDel(xhr,'exc');location.reload()}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}else{alert(mensagem)}}}
static cadastrar(form)
{document.getElementById("mensagem").innerHTML="<br /><b>Aguarde...</b>";var xhr=Util.createXHR();var mensagem="";if(form.txtNome.value==""){mensagem+="<br /><b>Você não preencheu a categoria</b>"}
if(Util.getCookie('token')==""){mensagem+="Token invalido"}
if(mensagem==""&&xhr!=undefined){xhr.open("POST","http://localhost/laravel-api/public/api/v1/categorias",!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){Categoria.callbackCadAltDel(xhr,'cad')}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send(Categoria.formToJSON(form))}else{document.getElementById("mensagem").innerHTML=mensagem}}
static atualizar(form)
{document.getElementById("mensagem").innerHTML="<br /><b>Aguarde...</b>";var codigo=form.codigo.value;var mensagem="";if(Util.getCookie('token')==""){mensagem+="Token invalido"}
if(codigo==""||codigo==undefined){mensagem+="Código invalido"}
if(document.getElementById("txtNome").value==""){mensagem+="<br /><b>Você não preencheu a Categoria</b>"}
var consulta="";var xhr=Util.createXHR();if(mensagem==""&&xhr!=undefined){xhr.open("PUT","http://localhost/laravel-api/public/api/v1/categorias/"+codigo,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){Categoria.callbackCadAltDel(xhr,'alt')}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send(Categoria.formToJSON(form))}else{document.getElementById("mensagem").innerHTML=mensagem}}};class Divisao
{static formToJSON(form)
{var codigo="";if(form.codigo!=undefined){codigo=form.codigo.value}
return JSON.stringify({"codigo_divisao":codigo,"nome":form.txtNome.value})}
static listar()
{var jwtoken,codigo,detalhes,alterar,excluir;jwtoken=Util.getCookie('token');var table=jQuery('#tabela01').dataTable({processing:!0,serverSide:!0,dom:"Bfrtip",ajax:{"url":'http://localhost/laravel-api/public/api/v1/divisoes',"dataType":'json',"type":"GET","beforeSend":function(xhr){xhr.setRequestHeader('Authorization','Bearer '+jwtoken)}},columns:[{"class":"details-control","orderable":!1,"searchable":!1,"searchable":!1,"data":null,render:function(data,type,row){codigo=data.codigo_divisao;detalhes="<a href=\"../consultas/detalhe.divisao.htm?codigo="+codigo+"\"><span class='glyphicon glyphicon-info-sign' aria-hidden='true'></span></a>";alterar="<span>  </span><a href=\"../formularios/alterar.divisao.htm?codigo="+codigo+"\"><span class='glyphicon glyphicon-edit' aria-hidden='true'></span></a>";excluir="<span>  </span><a href=\"javascript:Divisao.confirmar("+codigo+")\"><span class='glyphicon glyphicon-trash' aria-hidden='true'></span></a>";return detalhes+alterar+excluir},"defaultContent":"",},{"data":"codigo_divisao",name:"codigo_divisao","width":"60px"},{"data":"nome"},],select:!0,'language':{'url':'../../javascript/Portuguese-Brasil.json'}})}
static detalhe(codigo)
{var xhr=Util.createXHR();xhr.open("GET","http://localhost/laravel-api/public/api/v1/divisoes/"+codigo,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'&&xhr.status=='200'){var data=JSON.parse(xhr.responseText);document.getElementById("codigo").value=data.codigo_divisao;document.getElementById("txtNome").value=data.nome}}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}
static callbackCadAltDel(xhr,op)
{var msg="";if(op==='cad'){msg="Divisão cadastrada com sucesso."}else if(op==='alt'){msg="Divisão alterada com sucesso."}
if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);if(xhr.status=='200'||xhr.status=='201'){if(op=='cad'){document.getElementById("txtNome").value=""}
if(op!=='exc'){document.getElementById("mensagem").innerHTML=msg}}else if(xhr.status=='422'){var strErrosValidate="";if(json.validate_error!==undefined&&json.json.validate_error.nome!==undefined){strErrosValidate+=json.validate_error.nome[0]}
if(strErrosValidate!==''){document.getElementById("mensagem").innerHTML="<br /><b>"+strErrosValidate+"</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else if(xhr.status=='500'){if(json.error!==undefined&&json.error==='token_invalid'){document.getElementById("mensagem").innerHTML="<br /><b>Token inválido. Faça o login novamente.</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else if(xhr.status=='401'){if(json.error!==undefined&&json.error==='token_expired'){document.getElementById("mensagem").innerHTML="<br /><b>Token expirado. Faça o login novamente.</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}}
static confirmar(codigo)
{var xhr=Util.createXHR();var ok=window.confirm("Você tem certeza que deseja excluir esta divisão?");if(ok&&xhr!=undefined){var mensagem="";if(codigo==""){mensagem+="Código invalido"}
if(mensagem==""){xhr.open("DELETE","http://localhost/laravel-api/public/api/v1/divisoes/"+codigo,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){Tecnico.callbackCadAltDel(xhr,'exc');location.reload()}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}else{alert(mensagem)}}}
static cadastrar(form)
{document.getElementById("mensagem").innerHTML="<br /><b>Aguarde...</b>";var xhr=Util.createXHR();var mensagem="";if(form.txtNome.value==""){mensagem+="<br /><b>Você não preencheu a divisão</b>"}
if(Util.getCookie('token')==""){mensagem+="Token inválido"}
if(mensagem==""&&xhr!=undefined){xhr.open("POST","http://localhost/laravel-api/public/api/v1/divisoes",!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){Divisao.callbackCadAltDel(xhr,'cad')}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send(Divisao.formToJSON(form))}else{document.getElementById("mensagem").innerHTML=mensagem}}
static atualizar(form)
{document.getElementById("mensagem").innerHTML="<br /><b>Aguarde...</b>";var codigo=form.codigo.value;var mensagem="";if(Util.getCookie('token')==""){mensagem+="Token invalido"}
if(codigo==""||codigo==undefined){mensagem+="Código invalido"}
if(document.getElementById("txtNome").value==""){mensagem+="<br /><b>Você não preencheu a Divisão</b>"}
var consulta="";var xhr=Util.createXHR();if(mensagem==""&&xhr!=undefined){xhr.open("PUT","http://localhost/laravel-api/public/api/v1/divisoes/"+codigo,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){Divisao.callbackCadAltDel(xhr,'alt')}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send(Divisao.formToJSON(form))}else{document.getElementById("mensagem").innerHTML=mensagem}}};class Tecnico
{static valida()
{var strErro='';var txtDataNascimento=document.getElementById("txtDataNascimento").value;txtDataNascimento=txtDataNascimento.split("/");if(document.getElementById("txtNome").value==""){strErro=strErro+"\nVocê não preencheu o nome."}
if(txtDataNascimento[0]=="Dia"){strErro=strErro+"\nVocê não preencheu o dia."}
if(txtDataNascimento[1]=="Mes"){strErro=strErro+"\nVocê não preencheu o mes."}
if(txtDataNascimento[2]=="Ano"){strErro=strErro+"\nVocê não preencheu o ano."}
if(txtDataNascimento[0]=="31"&&(txtDataNascimento[1]=="04"||txtDataNascimento[1]=="06"||txtDataNascimento[1]=="09"||txtDataNascimento[1]=="11")){strErro=strErro+"\no mês que você escolheu não possui mais de 30 dias."}
if((txtDataNascimento[0]=="29")&&(txtDataNascimento[1]=="02")&&((txtDataNascimento[2]%4!="0")||(txtDataNascimento[2]%100!="0")||(txtDataNascimento[2]%400!="0"))){strErro=strErro+"\nEste ano não é bissexto."}
if(txtDataNascimento[0]>29&&txtDataNascimento[1]=="02"){strErro=strErro+"\nfevereiro não tem mais que 29 dias."}
if(strErro!=""){alert(strErro);return!1}}
static listar()
{var jwtoken,codigo,detalhes,alterar,excluir;jwtoken=Util.getCookie('token');var table=jQuery('#tabela01').dataTable({processing:!0,serverSide:!0,dom:"Bfrtip",ajax:{"url":'http://localhost/laravel-api/public/api/v1/tecnicos',"dataType":'json',"type":"GET","beforeSend":function(xhr){xhr.setRequestHeader('Authorization','Bearer '+jwtoken)}},columns:[{"class":"details-control","orderable":!1,"searchable":!1,"searchable":!1,"data":null,render:function(data,type,row){codigo=data.codigo_tecnico;detalhes="<a href=\"../consultas/detalhe.tecnico.htm?codigo="+codigo+"\"><span class='glyphicon glyphicon-info-sign' aria-hidden='true'></span></a>";alterar="<span>  </span><a href=\"../formularios/alterar.tecnico.htm?codigo="+codigo+"\"><span class='glyphicon glyphicon-edit' aria-hidden='true'></span></a>";excluir="<span>  </span><a href=\"javascript:Tecnico.confirmar("+codigo+")\"><span class='glyphicon glyphicon-trash' aria-hidden='true'></span></a>";return detalhes+alterar+excluir},"defaultContent":"",},{"data":"codigo_tecnico",name:"codigo_tecnico","width":"60px"},{"data":"nome"},],select:!0,'language':{'url':'../../javascript/Portuguese-Brasil.json'}})}
static detalhe(codigo)
{var xhr=Util.createXHR();xhr.open("GET","http://localhost/laravel-api/public/api/v1/tecnicos/"+codigo,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'&&xhr.status=='200'){var data=JSON.parse(xhr.responseText);document.getElementById("codigo").value=data.codigo_tecnico;document.getElementById("txtNome").value=data.nome;var data_nascimento=data.data_nascimento.split("-");data_nascimento=data_nascimento[2]+"/"+data_nascimento[1]+"/"+data_nascimento[0]
document.getElementById("txtDataNascimento").value=data_nascimento}}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}
static formToJSON(form)
{var codigo='';var txtNome='';var dataNascimento='';if(form.codigo!=undefined){codigo=form.codigo.value}
if(form.txtNome!=undefined){txtNome=form.txtNome.value}
if(form.txtDataNascimento!=undefined){dataNascimento=form.txtDataNascimento.value;dataNascimento=dataNascimento.split("/");dataNascimento=dataNascimento[2]+'-'+dataNascimento[1]+'-'+dataNascimento[0]}
return JSON.stringify({"codigo_tecnico":codigo,"nome":txtNome,"data_nascimento":dataNascimento})}
static callbackCadAltDel(xhr,op)
{var msg="";if(op==='cad'){msg="Técnico cadastrado com sucesso."}else if(op==='alt'){msg="Técnico alterado com sucesso."}
if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);if(xhr.status=='200'||xhr.status=='201'){if(op=='cad'){document.getElementById("txtNome").value=""}
if(op!=='exc'){document.getElementById("mensagem").innerHTML=msg}}else if(xhr.status=='422'){var strErrosValidate="";if(json.json.validate_error.nome!==undefined){strErrosValidate+=json.validate_error.nome[0]}
if(json.json.validate_error.data_nascimento!==undefined){strErrosValidate+=json.validate_error.data_nascimento[0]}
if(strErrosValidate!==''){document.getElementById("mensagem").innerHTML="<br /><b>"+strErrosValidate+"</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else if(xhr.status=='500'){if(json.error!==undefined&&json.error==='token_invalid'){document.getElementById("mensagem").innerHTML="<br /><b>Token inválido. Faça o login novamente.</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else if(xhr.status=='401'){if(json.error!==undefined&&json.error==='token_expired'){document.getElementById("mensagem").innerHTML="<br /><b>Token expirado. Faça o login novamente.</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}}
static confirmar(codigo)
{var xhr=Util.createXHR();var ok=window.confirm("Você tem certeza que deseja excluir este técnico?");if(ok&&xhr!=undefined){var mensagem="";if(codigo==""){mensagem+="Código invalido"}
if(mensagem==""){xhr.open("DELETE","http://localhost/laravel-api/public/api/v1/tecnicos/"+codigo,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){Tecnico.callbackCadAltDel(xhr,'exc');location.reload()}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}else{alert(mensagem)}}}
static cadastrar(form)
{if(Tecnico.valida()==!1){return!1}
document.getElementById("mensagem").innerHTML="<br /><b>Aguarde...</b>";var mensagem="";if(form.txtNome.value==""){mensagem+="<br /><b>Você não preencheu a técnico.</b>"}
var xhr=Util.createXHR();if(mensagem==""&&xhr!=undefined){xhr.open("POST","http://localhost/laravel-api/public/api/v1/tecnicos",!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){Tecnico.callbackCadAltDel(xhr,'cad');location.reload()}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send(Tecnico.formToJSON(form))}else{document.getElementById("mensagem").innerHTML=mensagem}}
static atualizar(form)
{document.getElementById("mensagem").innerHTML="<br /><b>Aguarde...</b>";var codigo=form.codigo.value;var mensagem="";if(codigo==""){mensagem+="Código invalido"}
if(form.txtNome.value==""){mensagem+="<br /><b>Você não preencheu a técnico</b>"}
var xhr=Util.createXHR();if(mensagem==""&&xhr!=undefined){xhr.open("PUT","http://localhost/laravel-api/public/api/v1/tecnicos/"+codigo,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){Tecnico.callbackCadAltDel(xhr,'alt')}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send(Tecnico.formToJSON(form))}else{document.getElementById("mensagem").innerHTML=mensagem}}};class Time
{static valida(form)
{var strErro="";if(document.getElementById("txtNome").value==""){strErro=strErro+"\nVoce Nao Preencheu o Nome"}
if(document.getElementById("txtFoto").value==""){strErro=strErro+"\nVoce Nao selecionou uma foto"}
if(strErro!=""){alert(strErro);return!1}}
static limpacamposCadastro()
{document.getElementById("txtFoto").value='';document.getElementById("txtNome").value='';document.getElementById("cmbDivisao").options.length=0;document.getElementById("cmbCategoria").options.length=0;document.getElementById("cmbTecnico").options.length=0;var rDesempenhotime=document.getElementsByName("rDesempenhotime");rDesempenhotime[0].checked=!0;var rComprarnovojogador=document.getElementsByName("rComprarnovojogador");rComprarnovojogador[0].checked=!0}
static cadastrar(form)
{var xhr=Util.createXHR();if(xhr!=undefined){var e=document.getElementById("cmbDivisao");var cmbDivisao=e.options[e.selectedIndex].value;var e=document.getElementById("cmbCategoria");var cmbCategoria=e.options[e.selectedIndex].value;var e=document.getElementById("cmbTecnico");var cmbTecnico=e.options[e.selectedIndex].value;var txtNome=document.getElementById("txtNome").value;var file=document.getElementById("txtFoto").files[0];var jForm=new FormData();jForm.append("capa",file);jForm.append("nome",txtNome);jForm.append("codigo_divisao",cmbDivisao);jForm.append("codigo_categoria",cmbCategoria);jForm.append("codigo_tecnico",cmbTecnico);jForm.append("desempenho_time",document.querySelector('input[name="rDesempenhotime"]:checked').value);jForm.append("comprar_novo_jogador",document.querySelector('input[name="rComprarnovojogador"]:checked').value);xhr.open("POST","http://localhost/laravel-api/public/api/v1/times");xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){var json=JSON.parse(xhr.responseText);alert(json.mensagem)}}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send(jForm)}
return!1}
static atualizar(form)
{var codigo=document.getElementById("codigo").value;if(codigo==""){mensagem+="Código invalido"}else{codigo="/"+codigo}
var xhr=Util.createXHR();if(xhr!=undefined){var e=document.getElementById("cmbDivisao");var cmbDivisao=e.options[e.selectedIndex].value;var e=document.getElementById("cmbCategoria");var cmbCategoria=e.options[e.selectedIndex].value;var e=document.getElementById("cmbTecnico");var cmbTecnico=e.options[e.selectedIndex].value;var txtNome=document.getElementById("txtNome").value;var file=document.getElementById("txtFoto").files[0];var jForm=new FormData();jForm.append("capa",file);jForm.append("nome",txtNome);jForm.append("codigo_divisao",cmbDivisao);jForm.append("codigo_categoria",cmbCategoria);jForm.append("codigo_tecnico",cmbTecnico);var token=Util.getCookie('token');var assincrono=!0;xhr.open("POST","http://localhost/laravel-api/public/api/v1/times"+codigo,assincrono);xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){var json=JSON.parse(xhr.responseText);document.getElementById("mensagem").innerHTML="Time alterado com sucesso."}}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send(jForm)}}
static confirmar(codigo)
{var ok=window.confirm("Você tem certeza que deseja excluir este time?");if(ok){var mensagem="";if(codigo==""){mensagem+="Código invalido"}else{codigo="/"+codigo}
var xhr=Util.createXHR();if(mensagem===""&&xhr!=undefined){xhr.open("DELETE","http://localhost/laravel-api/public/api/v1/times"+codigo,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);alert(json.mensagem);location.reload()}}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}else{alert(mensagem)}}}
static listar()
{var jwtoken,codigo,detalhes,alterar,excluir;jwtoken=Util.getCookie('token');var table=jQuery('#tabela01').dataTable({processing:!0,serverSide:!0,dom:"Bfrtip",ajax:{"url":'http://localhost/laravel-api/public/api/v1/times',"dataType":'json',"type":"GET","beforeSend":function(xhr){xhr.setRequestHeader('Authorization','Bearer '+jwtoken)}},columns:[{"class":"details-control","orderable":!1,"searchable":!1,"searchable":!1,"data":null,render:function(data,type,row){codigo=data.codigo_time;detalhes="<a href=\"../consultas/detalhe.time.htm?codigo="+codigo+"\"><span class='glyphicon glyphicon-info-sign' aria-hidden='true'></span></a>";alterar="<span>  </span><a href=\"../formularios/alterar.time.htm?codigo="+codigo+"\"><span class='glyphicon glyphicon-edit' aria-hidden='true'></span></a>";excluir="<span>  </span><a href=\"javascript:Time.confirmar("+codigo+")\"><span class='glyphicon glyphicon-trash' aria-hidden='true'></span></a>";return detalhes+alterar+excluir},"defaultContent":"",},{"data":"codigo_time",name:"codigo_time","width":"60px"},{"data":"nome"},],select:!0,'language':{'url':'../../javascript/Portuguese-Brasil.json'}})}
static detalhe(codigo,selecionarcombos=!1)
{var xhr=Util.createXHR();xhr.open("GET","http://localhost/laravel-api/public/api/v1/times/"+codigo);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'&&xhr.status=='200'){var data=JSON.parse(xhr.responseText);document.getElementById("codigo").value=data.codigo_time;if(selecionarcombos){document.getElementById("cdiv"+data.codigo_divisao).selected="true";document.getElementById("ccat"+data.codigo_categoria).selected="true";document.getElementById("ctec"+data.codigo_tecnico).selected="true"}
document.getElementById("txtNome").value=data.nome}}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}
static carregaDivisao()
{var xhr=Util.createXHR();if(xhr!=undefined){xhr.open("GET","http://localhost/laravel-api/public/api/v1/divisoes/listar-tudo");xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);var len=json.divisaos.length;var temRegistro=!1;var strHTML='';for(var i=0;i<len;i++){var codigo=json.divisaos[i].codigo_divisao;var nome=json.divisaos[i].nome;strHTML=strHTML+"<option id=\"cdiv"+codigo+"\" value=\""+codigo+"\">"+nome+"</option>";temRegistro=!0}
if(temRegistro==!1){strHTML="<option value=\"\">Nenhuma categoria cadastrada</option>"}
document.getElementById("cmbDivisao").innerHTML=strHTML;Util.prototype.ajaxcount++}}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}}
static carregaCategoria()
{var xhr=Util.createXHR();if(xhr!=undefined){xhr.open("GET","http://localhost/laravel-api/public/api/v1/categorias/listar-tudo");xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);var len=json.categorias.length;var temRegistro=!1;var strHTML='';for(var i=0;i<len;i++){var codigo=json.categorias[i].codigo_categoria;var nome=json.categorias[i].nome;strHTML=strHTML+"<option id=\"ccat"+codigo+"\" value=\""+codigo+"\">"+nome+"</option>";temRegistro=!0}
if(temRegistro===!1){strHTML="<option value=\"\">Nenhuma categoria cadastrada</option>"}
document.getElementById("cmbCategoria").innerHTML=strHTML;Util.prototype.ajaxcount++}}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}}
static carregaTecnico()
{var xhr=Util.createXHR();if(xhr!=undefined){xhr.open("GET","http://localhost/laravel-api/public/api/v1/tecnicos/listar-tudo");xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);var len=json.tecnicos.length;var temRegistro=!1;var strHTML='';for(var i=0;i<len;i++){var codigo=json.tecnicos[i].codigo_tecnico;var nome=json.tecnicos[i].nome;strHTML=strHTML+"<option id=\"ctec"+codigo+"\" value=\""+codigo+"\">"+nome+"</option>";temRegistro=!0}
if(temRegistro===!1){strHTML="<option value=\"\">Nenhuma tecnico cadastrado</option>"}
document.getElementById("cmbTecnico").innerHTML=strHTML;Util.prototype.ajaxcount++}}
var jwtoken='';jwtoken=Util.getCookie('token');xhr.setRequestHeader('Authorization','Bearer '+jwtoken);xhr.send()}}
static tudoParaDestino()
{var select=document.getElementById("origem");var tamanho=select.options.length;var dhtml="";var valor="";var texto="";for(i=0;i<tamanho;i++){valor=select.options[i].value;texto=select.options[i].text;dhtml=dhtml+"\n<option value=\""+valor+"\">"+texto+"</option>"}
document.getElementById("destino").innerHTML=dhtml}
static selecionadoParaDestino()
{var select=document.getElementById("origem");var tamanho=select.options.length;var valor="";var texto="";var dhtml="";for(i=0;i<tamanho;i++){if(select.options[i].selected===!0){valor=select.options[i].value;texto=select.options[i].text;dhtml=dhtml+"\n<option value=\""+valor+"\">"+texto+"</option>"}}
document.getElementById("destino").innerHTML=dhtml}
static limpaDestino()
{document.getElementById("destino").innerHTML=""}
static limpaSelecionadosDestino()
{var select=document.getElementById("destino");var tamanho=select.options.length;var dhtml="";var valor="";var texto="";for(i=0;i<tamanho;i++){if(select.options[i].selected!==!0){valor=select.options[i].value;texto=select.options[i].text;dhtml=dhtml+"\n<option value=\""+valor+"\">"+texto+"</option>"}}
document.getElementById("destino").innerHTML=dhtml}};class Torcedor
{static formToJSON(form)
{var codigo='';var txtNome='';var txtEmail='';var txtSenha='';var txtSenhaAtual='';var txtConfSenha='';if(form.id!=undefined){codigo=form.id.value}
if(form.codigo!=undefined){codigo=form.codigo.value}
if(form.txtNome!=undefined){txtNome=form.txtNome.value}
if(form.txtEmail!=undefined){txtEmail=form.txtEmail.value}
if(form.txtSenha!=undefined){txtSenha=form.txtSenha.value}
if(form.txtSenhaAtual!=undefined){txtSenhaAtual=form.txtSenhaAtual.value}
if(form.txtConfSenha!=undefined){txtConfSenha=form.txtConfSenha.value}
return JSON.stringify({"name":txtNome,"email":txtEmail,"password":txtSenha,"password_confirmation":txtConfSenha})}
static ativarAutenticacao2fatores()
{var xhr=Util.createXHR();var ok=window.confirm("Você tem certeza que deseja ativar a autenticação de 2 fatores?");if(ok&&xhr!=undefined){var token=Util.getCookie('token');var consulta="";if(token!==""){xhr.open("GET","http://localhost/sistemaRest/api/v1/controller/torcedor.php?a=1&tk="+token,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);if(json.torcedor!=undefined){document.getElementById('btnCadastrar').remove();document.getElementById("imgbase64").src=json.torcedor.imgbase64;document.getElementById("aviso").innerHTML="Baixe o app Google Authenticator.<br> Escanei o QR CODE com algum app no seu smartphone.";var strHtml='<br /> <label for="codAutenticacao">Código autenticação</label>';strHtml+=' <input type="text" name="codAutenticacao" id="codAutenticacao" value="" />';strHtml+='<br /><br />';strHtml+='<input id="btnCadastrar" type="button" value="Validar" onclick="Torcedor.validaAutenticacao2fatores()" />';document.getElementById("validaAutenticacao2Fatores").innerHTML=strHtml}else{if(json.mensagem!=undefined){alert(json.mensagem)}else{alert('Não foi possivel ativar a autenticação de 2 etapas.')}}}}
xhr.send()}else{alert("Sua sessão expirou.")}}}
static pegarQrCode()
{var xhr=Util.createXHR();if(xhr!=undefined){var token=Util.getCookie('token');if(token!==""){xhr.open("GET","http://localhost/sistemaRest/api/v1/controller/torcedor.php?a=5&tk="+token,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);document.getElementById("imgbase64").src=json.torcedor.imgbase64;document.getElementById("aviso").innerHTML="Baixe o app Google Authenticator.<br> Escanei o QR CODE com algum app no seu smartphone."}}
xhr.send()}else{alert("Sua sessão expirou.")}}}
static desativarAutenticacao2fatores()
{var xhr=Util.createXHR();var ok=window.confirm("Você tem certeza que deseja desativar a autenticação de 2 fatores?");if(ok&&xhr!=undefined){var token=Util.getCookie('token');var consulta="";if(token!==""){xhr.open("GET","http://localhost/sistemaRest/api/v1/controller/torcedor.php?a=2&tk="+token,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);alert(json.mensagem);window.location.href="../paginas/home.htm"}}
xhr.send()}else{alert(mensagem)}}}
static validaAutenticacao2fatores()
{var xhr=Util.createXHR();if(xhr!=undefined){var token=Util.getCookie('token');var consulta="";var codigoAutenticacao=document.getElementById("codAutenticacao").value;if(codigoAutenticacao!=''){consulta="&key="+codigoAutenticacao}
if(token!==""){xhr.open("GET","http://localhost/sistemaRest/api/v1/controller/torcedor.php?a=3&tk="+token+consulta,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);var msg="";if(json.mensagem!=undefined){alert(json.mensagem)}else if(json.resultado==1){window.location.href="../paginas/home.htm"}else if(json.resultado==0){alert("Código de autenticação invalido")}}}
xhr.send()}else{alert("falha1")}}else{alert("falha2")}}
static callbackCadAlt(xhr,op)
{var msg="";if(op==='cad'){msg="Torcedor cadastrado com sucesso."}else if(op==='alt'){msg="Torcedor alterado com sucesso."}
if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);if(xhr.status=='200'||xhr.status=='201'){if(op=='cad'){document.getElementById("txtNome").value="";document.getElementById("txtEmail").value="";document.getElementById("txtSenha").value="";document.getElementById("txtConfSenha").value=""}
if(op=='cad'||op=='alt'){document.getElementById("mensagem").innerHTML=msg}}else if(xhr.status=='422'){var strErrosValidate="";if(json.json.validate_error.name!==undefined){strErrosValidate+=json.validate_error.name[0]}
if(json.json.validate_error.email!==undefined){strErrosValidate+=json.validate_error.email[0]}
if(json.json.validate_error.password!==undefined){strErrosValidate+=json.validate_error.password[0]}
if(strErrosValidate!==''){document.getElementById("mensagem").innerHTML="<br /><b>"+strErrosValidate+"</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else if(xhr.status=='500'){if(json.error!==undefined&&json.error==='token_invalid'){document.getElementById("mensagem").innerHTML="<br /><b>Token inválido. Faça o login novamente.</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else if(xhr.status=='401'){if(json.error!==undefined&&json.error==='token_expired'){document.getElementById("mensagem").innerHTML="<br /><b>Token expirado. Faça o login novamente.</b>"}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}else{document.getElementById("mensagem").innerHTML="<br /><b>Algum erro desconhecido ocorreu.</b>"}}}
static cadastrar(form)
{document.getElementById("mensagem").innerHTML="<br /><b>Aguarde...</b>";var xhr=Util.createXHR();var mensagem="";if(form.txtNome.value==""){mensagem+="<br /><b>Você não preencheu o nome</b>"}
if(form.txtEmail.value==""){mensagem+="<br /><b>Você não preencheu o email</b>"}
if(form.txtSenha.value==""){mensagem+="<br /><b>Você não preencheu a senha</b>"}
if(form.txtConfSenha.value==""){mensagem+="<br /><b>Você não preencheu a confirmação da senha</b>"}
if(form.txtSenha.value!==form.txtConfSenha.value){mensagem+="<br /><b>As senhas não conferem</b>"}
if(mensagem==""&&xhr!=undefined){xhr.open("POST","http://localhost/laravel-api/public/api/v1/cadusuario",!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){Torcedor.callbackCadAlt(xhr,'cad')}
xhr.send(Torcedor.formToJSON(form))}else{document.getElementById("mensagem").innerHTML=mensagem}}
static atualizar(form)
{document.getElementById("mensagem").innerHTML="<br /><b>Aguarde...</b>";var xhr=Util.createXHR();var mensagem="";if(form.txtNome.value==""){mensagem+="<br /><b>Você não preencheu a técnico</b>"}
var token=Util.getCookie('token');var consulta="";if(token!==""){consulta="&tk="+token}
if(mensagem==""&&xhr!=undefined){xhr.open("POST","http://localhost/sistemaRest/api/v1/controller/torcedor.php?a=8"+consulta,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'&&xhr.status=='200'){var json=JSON.parse(xhr.responseText);document.getElementById("mensagem").innerHTML="<br /><b>"+json.mensagem+"</b>"}}
xhr.send(Torcedor.formToJSON(form))}else{document.getElementById("mensagem").innerHTML=mensagem}}
static insereDadosTorcedorRetornados(codigo)
{var xhr=Util.createXHR();var token=Util.getCookie('token');var consulta="";if(token!==""){consulta="&tk="+token}
xhr.open("GET","http://localhost/sistemaRest/api/v1/controller/torcedor.php?a=7&id="+codigo+consulta,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'&&xhr.status=='200'){var json=JSON.parse(xhr.responseText);if(json.mensagem==undefined){document.getElementById("txtNome").value=json.nome;document.getElementById("txtEmail").value=json.email}else{alert(json.mensagem)}}}
xhr.send()}
static autenticacao2fatoresEstaAtivada()
{var xhr=Util.createXHR();if(xhr!=undefined){var token=Util.getCookie('token');if(token!==""){xhr.open("GET","http://localhost/sistemaRest/api/v1/controller/torcedor.php?a=4&tk="+token,!0);xhr.setRequestHeader("Content-Type","application/json;charset=UTF-8");xhr.onreadystatechange=function(){if(xhr.readyState=='4'){var json=JSON.parse(xhr.responseText);var msg="";if(json.mensagem!=undefined){alert(json.mensagem)}else{var statusAutenticacao=json.resultado;document.getElementById("statusAutenticacao").value=statusAutenticacao;if(statusAutenticacao==1){document.getElementById("btnCadastrar").value='Desativar';Torcedor.pegarQrCode()}else if(statusAutenticacao==0){document.getElementById("btnCadastrar").value='Ativar';document.getElementById("aviso").innerHTML="Se você já habilitou anteriormente a autenticação de 2 fatores neste site verifique se no app google autenticator existe um registro deste site e se tiver exclua."}else if(statusAutenticacao==2){document.getElementById("btnCadastrar").value='Desativar';Torcedor.pegarQrCode();var strHtml='<br /> <label for="codAutenticacao">Código autenticação</label>';strHtml+=' <input type="text" name="codAutenticacao" id="codAutenticacao" value="" />';strHtml+='<br /><br />';strHtml+='<input id="btnCadastrar" type="button" value="Validar" onclick="Torcedor.validaAutenticacao2fatores()" />';document.getElementById("validaAutenticacao2Fatores").innerHTML=strHtml;document.getElementById("statusAutenticacao").value=1}}}}
xhr.send()}else{alert("falha1")}}else{alert("falha2")}}
static ativarDesativarAutenticacao2fatores()
{var status=document.getElementById("statusAutenticacao").value;if(status==1){Torcedor.desativarAutenticacao2fatores()}else if(status==0){Torcedor.ativarAutenticacao2fatores()}}}